# 20 August 2018

## GraphQl

### Directives

Add logic to queries.

Dynamically change the shape and structure of a query.

```graphql
query Hero($withFriends: Boolean!) {
  hero {
    friends @include(if: $withFriends) {
      name
    }
  }
}
```

There are two directives:

- `@include(if: Boolean)`: only include the field if the boolean is true
- `@skip(if: Boolean)`: skip this field if the boolean is true

### Mutations

Mutations are a type of query used to write data.

```graphql
# pass in the name string
mutation CreateFoo($name: String) {
  # create the Foo with a name
  createFoo(name: $name) {
    # return the name of the created foo in the response
    name
  }
}
```

Query fields run _in parallel_.
Mutation fields run _in series_.
A query that includes two mutations will not create a race condition.

### Inline Fragments

Some fields have union or interface types.
When querying that field, you must use an "inline fragment" to access the data
on that field.

```graphql
query HeroForEpisode($episode: Episode!) {
  hero(episode: $episode) {
    name
    ... on Droid {
      primaryFunction
    }
    ... on Human {
      height
    }
  }
}
```

This is a way of implementing polymorphic fields.

### Meta fields

When requesting polymorphic fields, you can request the `__typename` field to
know which type it is.

## Schema and Types

> Every GraphQL service defines a set of types which completely describe the
> set of possible data you can query on that service.

### Type system

**Object types**

Represents a type of object that exists in the service and fields on that
object.

```
type Character {
  name: String!
  appearsIn: [Episode]!
}
```

`String` is a built-in scalar type.

`!` means that the field is non-nullable.

`[Episode]!` is a non-nullable array of `Episode` objects.

**Arguments**

Every field can have zero or more objects.

**Scalar types**

Scalar types represent concrete, unstructured data.

The query is a tree structure.
Scalar types are leaves on that tree.

Default scalar types are:

- Int
- Float
- String
- Boolean
- ID

Custom scalar types can be defined.

**Enumeration types**

A special scalar type that is restricted to a set of values.

```
enum Foo {
  FOO
  BAR
  BAZ
}
```

A field with type `Foo` must have a value `FOO`, `BAR`, or `BAZ`.

## Miscellaneous

[The Wrong Abstraction by Sandi Metz](https://www.sandimetz.com/blog/2016/1/20/the-wrong-abstraction)

## The Y Combinator

[The Y Combinator (Slight Return)](https://mvanier.livejournal.com/2897.html)

## Functional Reactive Programming reading list

- [Stack Overflow: Specification for a Functional Reactive Programming language](https://stackoverflow.com/a/5878525/3125444)
- [Why program with continuous time by Conal Elliot](http://conal.net/blog/posts/why-program-with-continuous-time)
- [Early inspirations and new directions in functional reactive programming](http://conal.net/blog/posts/early-inspirations-and-new-directions-in-functional-reactive-programming)
- [Stack Overflow: How fundamentally different are push-pull and arrowized FRP](https://stackoverflow.com/questions/26164135/how-fundamentally-different-are-push-pull-and-arrowized-frp)
- [Generalizing Monads to Arrows](http://www.cse.chalmers.se/~rjmh/Papers/arrows.pdf)
- [Simply efficient functional reactivity](http://conal.net/papers/simply-reactive/)
- [Stack Overflow: Does push-pull FRP help when implementing games?](https://stackoverflow.com/questions/20602341/does-push-pull-frp-help-when-implementing-games)
- [Haskell.org: Functional Reactive Programming](https://wiki.haskell.org/Functional_Reactive_Programming)
- [Writing a ReactJS front-end in Haskell](https://begriffs.com/posts/2015-01-12-reactjs-in-haskell.html)
- [Design of Purescript Halogen](https://begriffs.com/posts/2015-07-10-design-of-purescript-halogen.html)
- [Haskell.org Arrows](https://www.haskell.org/arrows/)
